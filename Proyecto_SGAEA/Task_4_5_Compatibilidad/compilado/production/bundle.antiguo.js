(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,n(o.key),o)}}function n(e){var n=function(e){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(n)?n:n+""}var r=function(){return t=function t(e,n,r,o,a,i){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._calle=e,this._numero=n,this._piso=r,!/^\d{5}$/.test(o))throw new Error("El código postal debe tener exactamente 5 dígitos.");this._codPostal=o,this._provincia=a,this._localidad=i},(n=[{key:"toString",value:function(){return"".concat(this._calle,", ").concat(this._numero,", ").concat(this._piso,", ").concat(this._localidad,", ").concat(this._provincia," (").concat(this._codPostal,")")}}])&&e(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n}();function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,i(r.key),r)}}function i(t){var e=function(t){if("object"!=o(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==o(e)?e:e+""}function c(t,e){return t.get(s(t,e))}function s(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var u=new WeakMap,l=function(){return t=function t(e,n,r,o){var a,i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}(this,u,void 0),i=e,(a=u).set(s(a,this),i),this._nombre=n,this._edad=r,this._direccion=o},(e=[{key:"id",get:function(){return c(u,this)}},{key:"nombre",get:function(){return this._nombre}},{key:"toString",value:function(){return"ID: ".concat(c(u,this),", Nombre: ").concat(this.nombre,", Edad: ").concat(this._edad,", Dirección: ").concat(this._direccion)}}])&&a(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,p(r.key),r)}}function p(t){var e=function(t){if("object"!=f(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==f(e)?e:e+""}function b(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(b=function(){return!!t})()}function y(){return y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},y.apply(null,arguments)}function h(t){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},h(t)}function g(t,e){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},g(t,e)}function v(t,e){return t.get(E(t,e))}function E(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var w=new WeakMap,S=function(t){function e(t,n,r,o){var a,i,c,s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}(a=function(t,e,n){return e=h(e),function(t,e){if(e&&("object"==f(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,b()?Reflect.construct(e,n||[],h(t).constructor):e.apply(t,n))}(this,e,[t,n,r,o]),w,void 0),c=a,s=[],(i=w).set(E(i,c),s),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g(t,e)}(e,t),n=e,r=[{key:"asignaturas",get:function(){return function(t){return function(t){if(Array.isArray(t))return d(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return d(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(v(w,this))}},{key:"matricular",value:function(t,e,n){try{var r=e.buscarAsignaturaPorNombre(t,n);if(v(w,this).some((function(t){return t.asignatura===r})))throw new Error("El estudiante ya está matriculado en ".concat(r.nombre,"."));v(w,this).push({asignatura:r,fechaMatricula:(new Date).toLocaleDateString("es-ES")}),r.agregarEstudiante(this),console.log("Estudiante ".concat(this.nombre," matriculado en ").concat(r.nombre,"."))}catch(t){console.error("Error en la matriculación:",t.message)}}},{key:"desmatricular",value:function(t,e,n){try{var r=e.buscarAsignaturaPorNombre(t,n),o=v(w,this).findIndex((function(t){return t.asignatura===r}));if(-1===o)throw new Error("El estudiante no está matriculado en ".concat(r.nombre,"."));v(w,this).splice(o,1),r.eliminarEstudiante(this),console.log("Estudiante ".concat(this.nombre," desmatriculado de ").concat(r.nombre,"."))}catch(t){console.error("Error en la desmatriculación:",t.message)}}},{key:"promedioIndividual",value:function(){var t=this;try{if(0===v(w,this).length)throw new Error("El estudiante no tiene asignaturas matriculadas.");var e=v(w,this).flatMap((function(e){return e.asignatura.obtenerNotas(t)}));if(0===e.length)throw new Error("No hay calificaciones disponibles.");return(e.reduce((function(t,e){return t+e}),0)/e.length).toFixed(2)}catch(t){console.error("Error al calcular promedio:",t.message)}}},{key:"mostrarAsignaturas",value:function(){console.log("Asignaturas de ".concat(this.nombre,":")),v(w,this).forEach((function(t){return console.log("- ".concat(t.asignatura.nombre))}))}},{key:"toString",value:function(){return"".concat((t=e,n=this,r=y(h(t.prototype),"toString",n),"function"==typeof r?function(t){return r.apply(n,t)}:r)([]),", ").concat(v(w,this).length>0?"Asignaturas matriculadas: ".concat(v(w,this).length):"No tiene asignaturas matriculadas.");var t,n,r}}],r&&m(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(l);function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function k(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,j(r.key),r)}}function j(t){var e=function(t){if("object"!=P(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==P(e)?e:e+""}var N=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.nombre=e,this.listaEstudiantes=[],this.calificaciones=[]},e=[{key:"agregarEstudiante",value:function(t){t&&t.nombre?this.listaEstudiantes.some((function(e){return e.id===t.id}))?console.log("El estudiante ".concat(t.nombre," ya está matriculado en ").concat(this.nombre,".")):(this.listaEstudiantes.push(t),this.calificaciones.push({estudiante:t,calificaciones:[]}),console.log("Estudiante ".concat(t.nombre," agregado a la asignatura ").concat(this.nombre,"."))):console.error("El estudiante no tiene un nombre válido.")}},{key:"asignarNota",value:function(t,e,n){try{var r=n.buscarEstudiantePorNombre(t);if(!r)throw new Error("Estudiante ".concat(t," no encontrado."));if(!this.listaEstudiantes.some((function(t){return t.id===r.id})))throw new Error("El estudiante ".concat(r.nombre," no está matriculado en ").concat(this.nombre,"."));if(isNaN(e)||e<0||e>10)throw new Error("Nota inválida. Debe estar entre 0 y 10.");this.calificaciones.find((function(t){return t.estudiante.id===r.id})).calificaciones.push(e),console.log("Nota ".concat(e," asignada a ").concat(r.nombre," en ").concat(this.nombre,"."))}catch(t){console.error("Error al asignar nota:",t.message)}}},{key:"obtenerNotas",value:function(t){var e=this.calificaciones.find((function(e){return e.estudiante.id===t.id}));return e?e.calificaciones:[]}},{key:"calcularPromedio",value:function(){var t=this.calificaciones.flatMap((function(t){return t.calificaciones}));return t.length?(t.reduce((function(t,e){return t+e}),0)/t.length).toFixed(2):"No hay calificaciones disponibles."}},{key:"mostrarEstudiantes",value:function(){console.log("Estudiantes matriculados en ".concat(this.nombre,":")),this.listaEstudiantes.forEach((function(t){return console.log("- ".concat(t.nombre))}))}},{key:"eliminarEstudiante",value:function(t){this.listaEstudiantes=this.listaEstudiantes.filter((function(e){return e.id!==t.id})),this.calificaciones=this.calificaciones.filter((function(e){return e.estudiante.id!==t.id})),console.log("Estudiante ".concat(t.nombre," eliminado de la asignatura ").concat(this.nombre,"."))}},{key:"toString",value:function(){return"Asignatura: ".concat(this.nombre,", Estudiantes matriculados: ").concat(this.listaEstudiantes.length)}}],e&&k(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function A(t){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A(t)}function O(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_(r.key),r)}}function _(t){var e=function(t){if("object"!=A(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==A(e)?e:e+""}var I=new(function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.listaEstudiantes={},this.idActual=1},(e=[{key:"agregarEstudiante",value:function(t,e,n){var r=new S(this.idActual,t,e,n);this.listaEstudiantes[this.idActual]=r,console.log("Estudiante ".concat(t," añadido con éxito.")),this.idActual++}},{key:"eliminarEstudiante",value:function(t){try{if(isNaN(t))throw new Error("ID inválido. Por favor, introduce un número válido.");var e=this.listaEstudiantes[t];if(!e)throw new Error("No se encontró un estudiante con ID ".concat(t,"."));e.asignaturas.forEach((function(t){t.asignatura.eliminarEstudiante(e)})),delete this.listaEstudiantes[t],console.log("Estudiante con ID ".concat(t," eliminado y desmatriculado de todas las asignaturas."))}catch(t){console.error("Error al eliminar estudiante:",t.message)}}},{key:"mostrarEstudiantes",value:function(){try{var t=Object.values(this.listaEstudiantes);if(0===t.length)throw new Error("No hay estudiantes registrados.");console.log("Lista de estudiantes:"),t.forEach((function(t){console.log(t.toString()),t.mostrarAsignaturas()}))}catch(t){console.error("Error al mostrar estudiantes:",t.message)}}},{key:"promedioGeneral",value:function(){try{var t=Object.values(this.listaEstudiantes);if(0===t.length)throw new Error("No hay estudiantes registrados.");var e=t.map((function(t){return parseFloat(t.promedioIndividual())})).filter((function(t){return!isNaN(t)}));if(0===e.length)throw new Error("No hay promedios disponibles para calcular.");return(e.reduce((function(t,e){return t+e}),0)/e.length).toFixed(2)}catch(t){console.error("Error al calcular promedio general de todos los estudiantes:",t.message)}}},{key:"buscarAsignaturaPorNombre",value:function(t,e){var n=e.find((function(e){return e.nombre===t}));if(!n)throw new Error("Asignatura '".concat(t,"' no encontrada."));return n}},{key:"buscarEstudiantePorNombre",value:function(t){try{var e=Object.values(this.listaEstudiantes).filter((function(e){return e.nombre&&e.nombre.toLowerCase().trim().includes(t.toLowerCase().trim())}));return 0===e.length?(console.error("No se encontraron estudiantes con el nombre: '".concat(t,"'")),null):e.length>1?(console.log("Se encontraron múltiples estudiantes:"),e.forEach((function(t){return console.log(t.toString())})),console.error("Por favor, especifica un nombre más preciso."),null):e[0]}catch(t){return console.error("Error en la búsqueda del estudiante:",t.message),null}}}])&&O(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}()),C=[];!function(){console.log("Añadiendo datos de prueba..."),console.log("-----------------------------------------------------------");var t=new r("Calle Primavera",15,"2A","28010","Madrid","Madrid"),e=new r("Calle Invierno",22,"3B","18012","Granada","Granada"),n=new r("Calle Verano",5,"1C","41013","Sevilla","Sevilla");I.agregarEstudiante("Daniel",20,t),I.agregarEstudiante("Ana",22,e),I.agregarEstudiante("Carlos",21,n);var o=I.listaEstudiantes[1],a=I.listaEstudiantes[2],i=I.listaEstudiantes[3],c=new N("Matemáticas"),s=new N("Física"),u=new N("Literatura");C.push(c,s,u),o.matricular("Matemáticas",I,C),o.matricular("Física",I,C),a.matricular("Matemáticas",I,C),a.matricular("Literatura",I,C),i.matricular("Física",I,C),i.matricular("Literatura",I,C),c.asignarNota("Daniel",8,I),c.asignarNota("Ana",9,I),s.asignarNota("Daniel",7,I),s.asignarNota("Carlos",6,I),u.asignarNota("Ana",9,I),u.asignarNota("Carlos",7,I),console.log("Datos inicializados correctamente."),console.log("-----------------------------------------------------------")}(),function(){for(var t=!0;t;)switch(console.log("=== Menú Principal ===\n1. Añadir estudiante\n2. Eliminar estudiante\n3. Mostrar estudiantes\n4. Añadir asignatura\n5. Mostrar asignaturas\n6. Matricular estudiante en asignatura\n7. Desmatricular estudiante de asignatura\n8. Asignar nota a un estudiante\n9. Calcular promedio de un estudiante\n10. Calcular promedio general de estudiantes\n0. Salir\nEscribe tu opción en la consola y presiona Enter: \n-----------------------------------------------------------\n"),prompt("Introduce una opción:")){case"1":var e=prompt("Nombre del estudiante:"),n=parseInt(prompt("Edad del estudiante:"),10),r=prompt("Dirección del estudiante:");I.agregarEstudiante(e,n,r);break;case"2":var o=parseInt(prompt("ID del estudiante a eliminar:"),10);I.eliminarEstudiante(o);break;case"3":I.mostrarEstudiantes();break;case"4":var a=prompt("Nombre de la asignatura:");C.push(new N(a)),console.log("Asignatura ".concat(a," añadida con éxito."));break;case"5":console.log("Lista de asignaturas:"),C.forEach((function(t){return console.log("Asignatura: ".concat(t.nombre,", Estudiantes matriculados: ").concat(t.listaEstudiantes.length))}));break;case"6":var i=prompt("Introduce el nombre del estudiante:"),c=I.buscarEstudiantePorNombre(i);if(c){var s=prompt("Introduce el nombre de la asignatura:");c.matricular(s,I,C)}break;case"7":var u=prompt("Introduce el nombre del estudiante que desea desmatricular:"),l=I.buscarEstudiantePorNombre(u);if(l){var f=prompt("Introduce el nombre de la asignatura de la que se desea desmatricular al estudiante:");l.desmatricular(f,I,C)}break;case"8":var d=prompt("Nombre del estudiante:"),m=prompt("Nombre de la asignatura:"),p=parseFloat(prompt("Introduce la nota (0-10):")),b=I.buscarAsignaturaPorNombre(m,C);b&&b.asignarNota(d,p,I);break;case"9":var y=parseInt(prompt("ID del estudiante:"),10),h=I.listaEstudiantes[y],g=h.promedioIndividual();console.log("El promedio de ".concat(h.nombre," es: ").concat(g));break;case"10":var v=I.promedioGeneral();console.log("Promedio general de todos los estudiantes: ".concat(v));break;case"0":console.log("Saliendo del programa..."),t=!1;break;default:console.log("Opción no válida. Por favor, introduce un número entre 0 y 10.")}}()})();