# Polyfilling y TranspilaciÃ³n SGAEA

Este documento describe el proceso de implementaciÃ³n, configuraciÃ³n y comprobaciÃ³n del funcionamiento de **Node.js**, **Webpack** y **Babel** para realizar **polyfilling** y **transpilaciÃ³n** en el proyecto **SGAEA** (Sistema de GestiÃ³n AcadÃ©mica de Estudiantes y Asignaturas). El objetivo es asegurar que el proyecto pueda ejecutarse correctamente tanto en navegadores antiguos como en modernos.

---

## Descargar Node.js y comenzar un proyecto nuevo
Para iniciar un nuevo proyecto, abre la terminal en la carpeta del proyecto y ejecuta el siguiente comando:

```sh
npm init -y
```

---

## Instalar los paquetes necesarios
Para realizar el **polyfilling** y la **transpilaciÃ³n**, instala los siguientes paquetes:

```sh
npm install --save-dev webpack webpack-cli webpack-merge @babel/core @babel/preset-env babel-loader core-js regenerator-runtime copy-webpack-plugin cross-env html-webpack-plugin
```

### ExplicaciÃ³n de los paquetes:

- `webpack` 
- `webpack-cli`
- `webpack-merge`
- `@babel/core` y `@babel/preset-env`
- `babel-loader` 
- `core-js` 
- `regenerator-runtime` 
- `copy-webpack-plugin`
- `cross-env` 
- `html-webpack-plugin` 

---

## ConfiguraciÃ³n de Webpack
Se deben configurar tres archivos:

### **`webpack.antiguo.js`**
Este archivo genera un bundle compatible con navegadores antiguos:

```js
const path = require('path');
const { merge } = require('webpack-merge');
const common = require('./webpack.comun.js');

module.exports = merge(common, {
    output: {
        filename: 'bundle.antiguo.js',
    },
    module: {
        rules: [
            {
                test: /\.js$/,
                exclude: /node_modules/,
                use: {
                    loader: 'babel-loader',
                },
            },
        ],
    },
});
```

### **`webpack.moderno.js`**
Este archivo genera un bundle compatible con navegadores modernos:

```js
const path = require('path');
const { merge } = require('webpack-merge');
const common = require('./webpack.comun.js');

module.exports = merge(common, {
    output: {
        filename: 'bundle.moderno.js',
    },
});
```

### **`webpack.comun.js`**
Este archivo establece la configuraciÃ³n compartida:

```js
const path = require('path');
const CopyWebpackPlugin = require('copy-webpack-plugin');

module.exports = {
    entry: './js/main.js',
    output: {
        path: path.resolve(process.cwd(), 'compilado', process.env.modo),
    },
    mode: process.env.modo,
    plugins: [
        new CopyWebpackPlugin({
            patterns: [{ from: './index.html', to: '.' }],
        }),
    ],
};
```

---

## ConfiguraciÃ³n de Babel
Se requiere un archivo **`babel.config.js`** para definir las directrices de transpilaciÃ³n:

```js
module.exports = {
    presets: [
        [
            '@babel/preset-env',
            {
                targets: '> 0.25%, not dead',
                useBuiltIns: 'usage',
                corejs: 3,
            },
        ],
    ],
};
```

---

## ConfiguraciÃ³n del HTML
Para incluir ambos bundles en el proyecto, usa el siguiente cÃ³digo en el **`index.html`**:

```html
<head>
    <script defer type="module" src="bundle.moderno.js"></script>
    <script defer src="bundle.antiguo.js"></script>
</head>
```

Esto permite que cada navegador seleccione y ejecute el bundle que mejor se adapte a sus capacidades.

---

## CreaciÃ³n de scripts en `package.json`
Para facilitar la ejecuciÃ³n, aÃ±ade estos scripts en `package.json`:

```json
"scripts": {
    "antiguo": "cross-env-shell webpack --config webpack.antiguo.js --mode $modo",
    "moderno": "cross-env-shell webpack --config webpack.moderno.js --mode $modo",
    "des": "cross-env-shell modo=development run-s antiguo moderno",
    "prod": "cross-env-shell modo=production run-s antiguo moderno",
    "clean:comp": "rimraf compilado",
    "start": "run-s clean:comp des prod"
}
```

### DescripciÃ³n de los scripts:
- **`antiguo`** â†’ Crea el bundle para navegadores antiguos.
- **`moderno`** â†’ Crea el bundle para navegadores modernos.
- **`des`** â†’ Genera ambos bundles en modo desarrollo.
- **`prod`** â†’ Genera ambos bundles en modo producciÃ³n.
- **`clean:comp`** â†’ Elimina la carpeta `compilado`.
- **`start`** â†’ Borra `compilado` y genera nuevos bundles.

---

## GeneraciÃ³n de los bundles y comprobaciÃ³n
Para generar los bundles, ejecuta:

```sh
npm run start
```

Esto crearÃ¡ la siguiente estructura:

```
compilado/
â”œâ”€â”€ production/   # Bundles optimizados para producciÃ³n
â””â”€â”€ development/   # Bundles optimizados para desarrollo
```


## Pruebas en navegadores

Para verificar que el cÃ³digo transpila y se ejecuta correctamente en distintos navegadores, se realizaron pruebas en BrowserStack en diferentes versiones:

## ðŸ“Œ Prueba en Microsoft Edge 85 (Windows 8.1)
![Prueba en Edge 85](imagenes/img1.png)

## ðŸ“Œ Prueba en Firefox 99 (macOS Catalina)
![Prueba en Firefox 99](imagenes/img2.png)


